VAGRANT_BOX = "generic/ubuntu2004"
VM_MEMORY = 4096 # Default memory
VM_CPUS = 4     # Default CPUs

servers = [
  { :hostname => "server-00", :ip => "192.168.56.10" },
  { :hostname => "node-00", :ip => "192.168.56.11" },
# { :hostname => "node-01", :ip => "192.168.50.12" },
]

Vagrant.configure("2") do |config|
  config.vm.box = VAGRANT_BOX

  config.vm.provider "virtualbox" do |vb|
    vb.memory = VM_MEMORY
    vb.cpus = VM_CPUS
  end

  config.vm.provision "ansible" do |ansible|
    ansible.playbook = "../ansible/setup.yaml"
    # Define Ansible groups
    ansible.groups = {
      "server" => ["server-00"],
      "worker" => ["node-00"],
    }
  end

  # Define individual machines
  servers.each do |conf|
    config.vm.define conf[:hostname] do |node|
      node.vm.hostname = conf[:hostname]
      node.vm.network "private_network", ip:conf[:ip]

    end
  end
end